{"ID":"20241029234453-wz2g5x3","Spec":"1","Type":"NodeDocument","Properties":{"custom-common-Halo-yaml":"---_esc_newline_created: '2024-10-29 23:44:53'_esc_newline_updated: '2024-10-30 00:06:35'_esc_newline_title: Redis集群_esc_newline_slug: redis-cluster-zntu8t_esc_newline_permalink: siyuan://blocks/20241029234453-wz2g5x3_esc_newline_tags:_esc_newline_  - 面经_esc_newline_categories: []_esc_newline_---","custom-picgo-file-map-key":"\u0026#123;\u0026quot;7aafb03ad0a9262016201cc5cba81b71\u0026quot;:\u0026#123;\u0026quot;name\u0026quot;:\u0026quot;image-20241029235953-vh40mjv.png\u0026quot;,\u0026quot;hash\u0026quot;:\u0026quot;7aafb03ad0a9262016201cc5cba81b71\u0026quot;,\u0026quot;originUrl\u0026quot;:\u0026quot;assets/image-20241029235953-vh40mjv.png\u0026quot;,\u0026quot;url\u0026quot;:\u0026quot;https://syc-test111.oss-cn-chengdu.aliyuncs.com/image-20241029235953-vh40mjv.png\u0026quot;,\u0026quot;alt\u0026quot;:\u0026quot;image\u0026quot;,\u0026quot;title\u0026quot;:\u0026quot;\u0026quot;,\u0026quot;isLocal\u0026quot;:false,\u0026quot;blockId\u0026quot;:\u0026quot;20241029235953-vwqrmk3\u0026quot;\u0026#125;\u0026#125;","id":"20241029234453-wz2g5x3","tags":"面经","title":"Redis集群","type":"doc","updated":"20241030000639"},"Children":[{"ID":"20241029235426-32fjnfh","Type":"NodeParagraph","Properties":{"id":"20241029235426-32fjnfh","updated":"20241029235523"},"Children":[{"Type":"NodeText","Data":"Redis为了保证高可用/提高性能，需要将多个Redis节点作为集群处理，那么常见的方法有三种：主从复制、哨兵模式、集群模式。"}]},{"ID":"20241029235531-f04ntte","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241029235531-f04ntte","updated":"20241029235632"},"Children":[{"Type":"NodeText","Data":"主从复制"}]},{"ID":"20241029235405-x35zeio","Type":"NodeParagraph","Properties":{"id":"20241029235405-x35zeio","updated":"20241029235405"},"Children":[{"Type":"NodeText","Data":"主从复制是Redis的一种基本集群模式，它通过将一个Redis节点（主节点）的数据复制到一个或多个其他Redis节点（从节点）来实现数据的冗余和备份。"}]},{"ID":"20241029235405-p943mxf","Type":"NodeParagraph","Properties":{"id":"20241029235405-p943mxf","updated":"20241029235405"},"Children":[{"Type":"NodeText","Data":"主节点负责处理客户端的写操作，同时从节点会实时同步主节点的数据。客户端可以从从节点读取数据，实现读写分离，提高系统性能。"}]},{"ID":"20241029235408-o8u7rj6","Type":"NodeParagraph","Properties":{"id":"20241029235408-o8u7rj6","updated":"20241029235613"},"Children":[{"Type":"NodeText","Data":"问题："}]},{"ID":"20241029235623-gpfb4ao","Type":"NodeList","ListData":{"Typ":1},"Properties":{"id":"20241029235623-gpfb4ao","updated":"20241029235632"},"Children":[{"ID":"20241029235623-cwjrlk8","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"MS4=","Num":1},"Properties":{"id":"20241029235623-cwjrlk8","updated":"20241029235632"},"Children":[{"ID":"20241029235623-1pefsr0","Type":"NodeParagraph","Properties":{"id":"20241029235623-1pefsr0","updated":"20241029235632"},"Children":[{"Type":"NodeTextMark","TextMarkType":"strong","TextMarkTextContent":"主节点故障时，需要手动切换到从节点，故障恢复时间较长。"}]}]},{"ID":"20241029235623-9e8zuc7","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"Mi4=","Num":2},"Properties":{"id":"20241029235623-9e8zuc7","updated":"20241029235623"},"Children":[{"ID":"20241029235623-wsmqzx2","Type":"NodeParagraph","Properties":{"id":"20241029235623-wsmqzx2","updated":"20241029235623"},"Children":[{"Type":"NodeText","Data":"主节点承担所有写操作，可能成为性能瓶颈。"}]}]},{"ID":"20241029235623-643vkqk","Type":"NodeListItem","ListData":{"Typ":1,"Delimiter":46,"Marker":"My4=","Num":3},"Properties":{"id":"20241029235623-643vkqk","updated":"20241029235623"},"Children":[{"ID":"20241029235623-dewdu3q","Type":"NodeParagraph","Properties":{"id":"20241029235623-dewdu3q","updated":"20241029235623"},"Children":[{"Type":"NodeText","Data":"无法实现数据分片，受单节点内存限制。"}]}]}]},{"ID":"20241029235623-f169erk","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241029235623-f169erk","updated":"20241029235927"},"Children":[{"Type":"NodeText","Data":"哨兵模式"}]},{"ID":"20241029235740-xzz9c6j","Type":"NodeParagraph","Properties":{"id":"20241029235740-xzz9c6j","updated":"20241029235851"},"Children":[{"Type":"NodeText","Data":"加一个“哨兵节点”，它负责监控其他节点，一旦主节点故障，会自动选举出新的主节点，并通知其他节点和客户端。"}]},{"ID":"20241029235927-p4d2wxo","Type":"NodeHeading","HeadingLevel":2,"Properties":{"id":"20241029235927-p4d2wxo","updated":"20241030000639"},"Children":[{"Type":"NodeText","Data":"集群模式"}]},{"ID":"20241029235931-88ioy87","Type":"NodeParagraph","Properties":{"id":"20241029235931-88ioy87","updated":"20241029235945"},"Children":[{"Type":"NodeText","Data":"Cluster模式是Redis的一种高级集群模式，它通过数据分片和分布式存储实现了负载均衡和高可用性。在Cluster模式下，Redis将所有的键值对数据分散在多个节点上。每个节点负责一部分数据，称为槽位。"}]},{"ID":"20241029235953-vwqrmk3","Type":"NodeParagraph","Properties":{"id":"20241029235953-vwqrmk3","updated":"20241030000639"},"Children":[{"Type":"NodeText","Data":"​"},{"Type":"NodeImage","Data":"span","Children":[{"Type":"NodeBang"},{"Type":"NodeOpenBracket"},{"Type":"NodeLinkText","Data":"image"},{"Type":"NodeCloseBracket"},{"Type":"NodeOpenParen"},{"Type":"NodeLinkDest","Data":"https://syc-test111.oss-cn-chengdu.aliyuncs.com/image-20241029235953-vh40mjv.png"},{"Type":"NodeCloseParen"}]},{"Type":"NodeText","Data":"​"}]},{"ID":"20241029235954-ms4wd7w","Type":"NodeParagraph","Properties":{"id":"20241029235954-ms4wd7w","updated":"20241030000022"},"Children":[{"Type":"NodeText","Data":"Redis Cluster将数据分为16384个槽位，每个节点负责管理一部分槽位。当客户端向Redis Cluster发送请求时，Cluster会根据键的哈希值将请求路由到相应的节点。具体来说，Redis Cluster使用CRC16算法计算键的哈希值，然后对16384取模，得到槽位编号。"}]},{"ID":"20241030000023-fyc1p02","Type":"NodeParagraph","Properties":{"id":"20241030000023-fyc1p02","updated":"20241030000023"}}]}