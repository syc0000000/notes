# Redis集群

Redis为了保证高可用/提高性能，需要将多个Redis节点作为集群处理，那么常见的方法有三种：主从复制、哨兵模式、集群模式。

## 主从复制

主从复制是Redis的一种基本集群模式，它通过将一个Redis节点（主节点）的数据复制到一个或多个其他Redis节点（从节点）来实现数据的冗余和备份。

主节点负责处理客户端的写操作，同时从节点会实时同步主节点的数据。客户端可以从从节点读取数据，实现读写分离，提高系统性能。

问题：

1. **主节点故障时，需要手动切换到从节点，故障恢复时间较长。**
2. 主节点承担所有写操作，可能成为性能瓶颈。
3. 无法实现数据分片，受单节点内存限制。

## 哨兵模式

加一个“哨兵节点”，它负责监控其他节点，一旦主节点故障，会自动选举出新的主节点，并通知其他节点和客户端。

## 集群模式

Cluster模式是Redis的一种高级集群模式，它通过数据分片和分布式存储实现了负载均衡和高可用性。在Cluster模式下，Redis将所有的键值对数据分散在多个节点上。每个节点负责一部分数据，称为槽位。

![image](https://syc-test111.oss-cn-chengdu.aliyuncs.com/image-20241029235953-vh40mjv.png)

Redis Cluster将数据分为16384个槽位，每个节点负责管理一部分槽位。当客户端向Redis Cluster发送请求时，Cluster会根据键的哈希值将请求路由到相应的节点。具体来说，Redis Cluster使用CRC16算法计算键的哈希值，然后对16384取模，得到槽位编号。

‍
